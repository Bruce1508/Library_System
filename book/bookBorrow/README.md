+----------------+      +----------------+      +-------------------+
| Start borrow   |----->| Check if user  |----->| Branch by         |
| ReturnMenu     |      | logged in      |      | login status      |
+----------------+      +----------------+      +--------+----------+
                                                         |
         +-------------------------------------------------------+
         |                                                       |
         v                                                       v
+------------------+                                  +--------------------+
| Not logged in    |                                  | Logged in          |
| Show error       |                                  | Check if library   |
| & return         |                                  | has books          |
+------------------+                                  +---------+----------+
                                                               |
                                         +---------------------+--------------------+
                                         |                                          |
                                         v                                          v
                                +------------------+                      +--------------------+
                                | No books in      |                      | Books available    |
                                | library          |                      | Display Menu:      |
                                | Show message     |                      | 1. Borrow          |
                                | & return         |                      | 2. Return          |
                                +------------------+                      | 0. Back            |
                                                                          +---------+----------+
                                                                                    |
                         +--------------------------------+--------------------+----+
                         |                               |                     |
                         v                               v                     v
                  +-------------+                 +-------------+        +-------------+
                  | Option 0:   |                 | Option 1:   |        | Option 2:   |
                  | Back to     |                 | Borrow Book |        | Return Book |
                  | main menu   |                 +------+------+        +------+------+
                  +-------------+                        |                      |
                                                         v                      v
                                                +------------------+    +------------------+
                                                | Enter book ID    |    | Enter book ID    |
                                                | to borrow        |    | to return        |
                                                +--------+---------+    +--------+---------+
                                                         |                       |
                                                         v                       v
                                                +------------------+    +------------------+
                                                | Find book by ID  |    | Find book by ID  |
                                                | in library       |    | in library       |
                                                +--------+---------+    +--------+---------+
                                                         |                       |
                                              +-----------+----------+  +---------+----------+
                                              |           |          |  |         |          |
                                              v           v          |  v         v          |
                                       +------------+ +----------+   | +------------+ +----------+
                                       | Not found  | | Found    |   | | Not found  | | Found    |
                                       | Show msg   | |          |   | | Show msg   | |          |
                                       | & return   | |          |   | | & return   | |          |
                                       +------------+ +-----+----+   | +------------+ +-----+----+
                                                           |         |                      |
                                                           v         |                      v
                                              +------------------+   |           +------------------+
                                              | Check if copies  |   |           | Check if any     |
                                              | available        |   |           | copies borrowed  |
                                              +--------+---------+   |           +--------+---------+
                                                       |             |                    |
                                           +-------+---+--------+    |        +-------+---+--------+
                                           |       |            |    |        |       |            |
                                           v       v            |    |        v       v            |
                                    +------------+ +----------+ |    | +------------+ +----------+ |
                                    | All copies | | Copies   | |    | | No copies  | | Copies   | |
                                    | borrowed   | | available| |    | | borrowed   | | borrowed | |
                                    | Show msg   | |          | |    | | Show msg   | |          | |
                                    | & return   | |          | |    | | & return   | |          | |
                                    +------------+ +-----+----+ |    | +------------+ +-----+----+ |
                                                        |       |    |                      |       |
                                                        v       |    |                      v       |
                                               +--------------+ |    |             +--------------+ |
                                               | Increment    | |    |             | Decrement    | |
                                               | borrowed     | |    |             | borrowed     | |
                                               | count        | |    |             | count        | |
                                               +------+-------+ |    |             +------+-------+ |
                                                      |         |    |                    |         |
                                                      v         |    |                    v         |
                                               +--------------+ |    |             +--------------+ |
                                               | Show progress| |    |             | Show progress| |
                                               | bar          | |    |             | bar          | |
                                               +------+-------+ |    |             +------+-------+ |
                                                      |         |    |                    |         |
                                                      v         |    |                    v         |
                                               +--------------+ |    |             +--------------+ |
                                               | Display book | |    |             | Display book | |
                                               | details      | |    |             | details      | |
                                               +------+-------+ |    |             +------+-------+ |
                                                      |         |    |                    |         |
                                                      v         |    |                    v         |
                                               +--------------+ |    |             +--------------+ |
                                               | Show success | |    |             | Show success | |
                                               | message      |-+----+-------------| message      | |
                                               +--------------+                     +--------------+ |
                                                                                            |       |
                                                                                            +-------+
                                                                                                |
                                                                                                v
                                                                                       +----------------+
                                                                                       |     Return     |
                                                                                       +----------------+